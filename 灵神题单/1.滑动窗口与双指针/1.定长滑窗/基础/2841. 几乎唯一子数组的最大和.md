```python
class Solution:
    def maxSum(self, nums: List[int], m: int, k: int) -> int:
        res = 0
        n = len(nums)
        mp = defaultdict(int)
        for i,c in enumerate(nums):
            mp[c] += 1
            if i < k -1 :
                continue
            if len(mp) >= m:
                res = max(res,sum(nums[i-k+1:i+1]))
            mp[nums[i-k+1]] -= 1
            if mp[nums[i-k+1]] == 0:
                del mp[nums[i-k+1]]

        return res
```
