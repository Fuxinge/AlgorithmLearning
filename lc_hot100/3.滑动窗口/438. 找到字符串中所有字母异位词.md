```cpp
class Solution {
public:
    vector<int> findAnagrams(string s, string p) {
        int n = s.size(), m = p.size();
        vector<int> res;
        unordered_map<char,int> mp,tar;
        for(auto c:p)
        {
            tar[c]++;
        }

        for(int i = 0;i<n;i++)
        {
            mp[s[i]]++;

            if(i-m+1<0) continue;

            if(tar==mp) res.push_back(i-m+1);

            mp[s[i-m+1]]--;
            if(mp[s[i-m+1]]==0) mp.erase(s[i-m+1]);
        }

        return res;

    }
};
```

```python
class Solution:
    def findAnagrams(self, s: str, p: str) -> List[int]:
        res = []
        tar = defaultdict(int) # 后续看灵神代码，可以用counter类，笔记中有
        win = defaultdict(int)
        m = len(p)
        for c in p:
            tar[c] += 1

        for i,c in enumerate(s):
            win[s[i]] += 1

            if i - m + 1 < 0 :
                continue

            if tar == win:
                res.append(i - m + 1)

            win[s[i - m + 1]] -= 1
            if win[s[i - m + 1]] == 0:
                del win[s[i-m+1]]

        return res

```
